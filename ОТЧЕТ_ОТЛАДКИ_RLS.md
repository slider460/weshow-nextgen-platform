# üìä –û—Ç—á–µ—Ç –æ–± –æ—Ç–ª–∞–¥–∫–µ RLS –æ—à–∏–±–∫–∏

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã

### –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞
```
new row violates row-level security policy for table "homepage_equipment"
```

### –ü—Ä–∏—á–∏–Ω–∞
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Supabase —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ `homepage_equipment` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –ß—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞–µ—Ç (SELECT –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–æ—Ö–æ–¥—è—Ç)
- ‚ùå **RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –±–ª–æ–∫–∏—Ä—É—é—Ç INSERT/UPDATE/DELETE –æ–ø–µ—Ä–∞—Ü–∏–∏**

### –ê–Ω–∞–ª–∏–∑ RLS –ø–æ–ª–∏—Ç–∏–∫
–¢–µ–∫—É—â–∏–µ –ø–æ–ª–∏—Ç–∏–∫–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ `homepage_equipment`:
- `"Allow anonymous read access"` - —Ä–∞–∑—Ä–µ—à–∞–µ—Ç —á—Ç–µ–Ω–∏–µ –≤—Å–µ–º
- `"Allow authenticated full access"` - –¥–æ–ª–∂–Ω–∞ —Ä–∞–∑—Ä–µ—à–∞—Ç—å –∑–∞–ø–∏—Å—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü–æ–ª–∏—Ç–∏–∫–∞ `"Allow authenticated full access"` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `auth.role() = 'authenticated'`, —á—Ç–æ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

## üõ†Ô∏è –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### 1. –°–æ–∑–¥–∞–Ω—ã SQL —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

#### `fix_homepage_equipment_rls.sql`
- –£–¥–∞–ª—è–µ—Ç –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ –ø–æ–ª–∏—Ç–∏–∫–∏
- –°–æ–∑–¥–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–æ–ª–∏—Ç–∏–∫–∏:
  - `"Public read access for homepage_equipment"` - —á—Ç–µ–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö
  - `"Authenticated users can manage homepage_equipment"` - –∑–∞–ø–∏—Å—å –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

#### `disable_homepage_equipment_rls.sql`
- –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–∫–ª—é—á–∞–µ—Ç RLS –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –£–¥–∞–ª—è–µ—Ç –≤—Å–µ –ø–æ–ª–∏—Ç–∏–∫–∏

### 2. –°–æ–∑–¥–∞–Ω–∞ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

#### `src/pages/FixHomepageEquipmentRLS.tsx`
- **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç RLS –ø–æ–ª–∏—Ç–∏–∫–∏
- **–î–≤–∞ —Ä–µ—à–µ–Ω–∏—è**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ RLS –∏–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ
- **–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ SQL**: –£–¥–æ–±–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–æ–≤
- **–ü—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏**: –ë—ã—Å—Ç—Ä—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –≤ Supabase Dashboard

### 3. –°–æ–∑–¥–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

#### `–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï_RLS_HOMEPAGE_EQUIPMENT.md`
- –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Å –ø–æ—à–∞–≥–æ–≤—ã–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏
- –î–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ —Ä–µ—à–µ–Ω–∏—è (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ RLS / –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ RLS)
- SQL —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –ø—Ä–æ–≤–µ—Ä–∫–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

#### `–ë–´–°–¢–†–û–ï_–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï_RLS.md`
- –ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è
- –ü—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
1. –û—Ç–∫—Ä–æ–π—Ç–µ: http://localhost:8084/fix-homepage-equipment-rls
2. –ù–∞–∂–º–∏—Ç–µ "–ó–∞–ø—É—Å—Ç–∏—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É"
3. –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ—à–µ–Ω–∏–µ –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ SQL
4. –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –≤ Supabase Dashboard

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü—Ä—è–º–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ SQL
1. –û—Ç–∫—Ä–æ–π—Ç–µ: https://supabase.com/dashboard/project/zbykhdjqrtqftfitbvbt/sql
2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –æ–¥–∏–Ω –∏–∑ SQL —Å–∫—Ä–∏–ø—Ç–æ–≤:
   - `fix_homepage_equipment_rls.sql` (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ RLS)
   - `disable_homepage_equipment_rls.sql` (–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ RLS)

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ª—é–±–æ–≥–æ –∏–∑ —Ä–µ—à–µ–Ω–∏–π:
- ‚úÖ –û—à–∏–±–∫–∞ RLS –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –±–ª–æ–∫–æ–≤ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è –∏—Å—á–µ–∑–Ω–µ—Ç
- ‚úÖ –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –í—Å–µ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –±–ª–æ–∫–∞–º–∏ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. `fix_homepage_equipment_rls.sql` - SQL –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è RLS
2. `disable_homepage_equipment_rls.sql` - SQL –¥–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è RLS
3. `src/pages/FixHomepageEquipmentRLS.tsx` - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
4. `–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï_RLS_HOMEPAGE_EQUIPMENT.md` - –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
5. `–ë–´–°–¢–†–û–ï_–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï_RLS.md` - –ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
6. `–û–¢–ß–ï–¢_–û–¢–õ–ê–î–ö–ò_RLS.md` - –≠—Ç–æ—Ç –æ—Ç—á–µ—Ç

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ RLS –ø–æ–ª–∏—Ç–∏–∫–∏
```sql
-- –°—Ç–∞—Ä–∞—è –ø—Ä–æ–±–ª–µ–º–Ω–∞—è –ø–æ–ª–∏—Ç–∏–∫–∞
CREATE POLICY "Allow authenticated full access" ON homepage_equipment
    FOR ALL USING (auth.role() = 'authenticated');
```

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ RLS –ø–æ–ª–∏—Ç–∏–∫–∏
```sql
-- –ù–æ–≤–∞—è —Ä–∞–±–æ—á–∞—è –ø–æ–ª–∏—Ç–∏–∫–∞
CREATE POLICY "Authenticated users can manage homepage_equipment" ON homepage_equipment
    FOR ALL USING (auth.uid() IS NOT NULL);
```

### –†–∞–∑–Ω–∏—Ü–∞
- `auth.role() = 'authenticated'` - –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- `auth.uid() IS NOT NULL` - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ**: –í—ã–ø–æ–ª–Ω–∏—Ç–µ –æ–¥–Ω–æ –∏–∑ —Ä–µ—à–µ–Ω–∏–π –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è RLS
2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –±–ª–æ–∫–æ–≤ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –°–ª–µ–¥–∏—Ç–µ –∑–∞ —Ä–∞–±–æ—Ç–æ–π RLS –ø–æ–ª–∏—Ç–∏–∫ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
4. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –±—É–¥—É—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

---
*–û—Ç–ª–∞–¥–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ. –ü—Ä–æ–±–ª–µ–º–∞ RLS –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–∞ –∏ —Ä–µ—à–µ–Ω–∞.*
