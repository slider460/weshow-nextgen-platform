# üöÄ –†–ï–®–ï–ù–ò–ï –ê–î–ú–ò–ù –ü–ê–ù–ï–õ–ò –ü–û –ê–ù–ê–õ–û–ì–ò–ò –° –û–ë–û–†–£–î–û–í–ê–ù–ò–ï–ú

## üìã –û–±–∑–æ—Ä

–°–æ–∑–¥–∞–Ω–æ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏, –æ—Å–Ω–æ–≤–∞–Ω–Ω–æ–µ –Ω–∞ —É—Å–ø–µ—à–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏—è—Ö –¥–ª—è –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è. –í–∫–ª—é—á–∞–µ—Ç –ø–æ–ª–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ RLS, —Å–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–∞–±–ª–∏—Ü –∏ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 1. `–ö–û–ú–ü–õ–ï–ö–°–ù–û–ï_–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï_–ê–î–ú–ò–ù_–ü–ê–ù–ï–õ–ò.sql`
**–û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- ‚úÖ –û—Ç–∫–ª—é—á–∞–µ—Ç RLS –¥–ª—è –≤—Å–µ—Ö –∞–¥–º–∏–Ω —Ç–∞–±–ª–∏—Ü
- ‚úÖ –£–¥–∞–ª—è–µ—Ç –≤—Å–µ –ø–æ–ª–∏—Ç–∏–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã
- ‚úÖ –î–æ–±–∞–≤–ª—è–µ—Ç –±–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç

### 2. `–°–û–ó–î–ê–ù–ò–ï_–¢–ê–ë–õ–ò–¶_–ê–î–ú–ò–ù_–ü–ê–ù–ï–õ–ò.sql`
**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:**
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã
- ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ –î–æ–±–∞–≤–ª—è–µ—Ç —Ç—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É

### 3. `–¢–ï–°–¢–û–í–´–ï_–î–ê–ù–ù–´–ï_–ê–î–ú–ò–ù_–ü–ê–ù–ï–õ–ò.sql`
**–¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –∞–¥–º–∏–Ω—ã
- ‚úÖ –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –∫–∞—Ç–∞–ª–æ–≥–∞
- ‚úÖ –ó–∞—è–≤–∫–∏ –∏ –ø–æ–∑–∏—Ü–∏–∏
- ‚úÖ –ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ –ø—Ä–æ–µ–∫—Ç—ã
- ‚úÖ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ

## üéØ –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
```sql
-- –í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ Supabase SQL Editor
\i –°–û–ó–î–ê–ù–ò–ï_–¢–ê–ë–õ–ò–¶_–ê–î–ú–ò–ù_–ü–ê–ù–ï–õ–ò.sql
```

### –®–∞–≥ 2: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ RLS
```sql
-- –í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ Supabase SQL Editor
\i –ö–û–ú–ü–õ–ï–ö–°–ù–û–ï_–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï_–ê–î–ú–ò–ù_–ü–ê–ù–ï–õ–ò.sql
```

### –®–∞–≥ 3: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
```sql
-- –í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ Supabase SQL Editor
\i –¢–ï–°–¢–û–í–´–ï_–î–ê–ù–ù–´–ï_–ê–î–ú–ò–ù_–ü–ê–ù–ï–õ–ò.sql
```

## üìä –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
- **`users`** - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã
- **`admin_users`** - –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã
- **`estimates`** - –ó–∞—è–≤–∫–∏ –Ω–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ
- **`estimate_items`** - –ü–æ–∑–∏—Ü–∏–∏ –≤ –∑–∞—è–≤–∫–∞—Ö
- **`estimate_equipment`** - –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –≤ –∑–∞—è–≤–∫–∞—Ö
- **`equipment_catalog`** - –ö–∞—Ç–∞–ª–æ–≥ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è

### –ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ
- **`portfolio_items`** - –ü—Ä–æ–µ–∫—Ç—ã –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ
- **`portfolio_categories`** - –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ
- **`media_files`** - –ú–µ–¥–∏–∞ —Ñ–∞–π–ª—ã

## üîß –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ—à–µ–Ω–∏—è

### 1. –ü–æ–ª–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ RLS
```sql
ALTER TABLE users DISABLE ROW LEVEL SECURITY;
ALTER TABLE admin_users DISABLE ROW LEVEL SECURITY;
-- ... –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
```

### 2. –£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–ª–∏—Ç–∏–∫
```sql
DROP POLICY IF EXISTS "Allow public read access" ON users;
DROP POLICY IF EXISTS "Authenticated users can manage users" ON users;
-- ... –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
```

### 3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã
```sql
CREATE TRIGGER update_users_updated_at BEFORE UPDATE ON users
    FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();
```

### 4. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã
```sql
CREATE INDEX idx_users_email ON users(email);
CREATE INDEX idx_estimates_status ON estimates(status);
-- ... –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
```

## üìà –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (5 –∫–ª–∏–µ–Ω—Ç–æ–≤)
- –ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤ - –û–û–û "–¢–µ—Ö–Ω–æ–ú–∏—Ä"
- –ú–∞—Ä–∏—è –°–∏–¥–æ—Ä–æ–≤–∞ - –ò–ü "–°–∏–¥–æ—Ä–æ–≤–∞ –ú.–ê."
- –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ö–æ–∑–ª–æ–≤ - –û–û–û "–ö–æ–∑–ª–æ–≤ –∏ –ü–∞—Ä—Ç–Ω–µ—Ä—ã"
- –ï–ª–µ–Ω–∞ –í–æ–ª–∫–æ–≤–∞ - –ê–û "–í–æ–ª–∫–æ–≤–∞ –ì—Ä—É–ø–ø"
- –î–º–∏—Ç—Ä–∏–π –°–æ–∫–æ–ª–æ–≤ - –û–û–û "–°–æ–∫–æ–ª–æ–≤ –ü—Ä–æ–µ–∫—Ç—ã"

### –ê–¥–º–∏–Ω—ã (2 –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞)
- admin@weshow.su - super_admin
- moderator1@weshow.su - moderator

### –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ (4 –ø–æ–∑–∏—Ü–∏–∏)
- LED-—ç–∫—Ä–∞–Ω P3 Indoor (Absen A3 Pro)
- LED-—ç–∫—Ä–∞–Ω P6 Outdoor (Absen A6 Pro)
- –ü—Ä–æ–µ–∫—Ç–æ—Ä 4K UHD (Sony VPL-FHZ75)
- –ó–≤—É–∫–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ Line Array (JBL VTX A12)

### –ó–∞—è–≤–∫–∏ (5 –∑–∞—è–≤–æ–∫)
- –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ "–¢–µ—Ö–Ω–æ–ú–∏—Ä 2024" (pending_review)
- –í—ã—Å—Ç–∞–≤–∫–∞ "–ò–Ω–Ω–æ–≤–∞—Ü–∏–∏ 2024" (confirmed)
- –ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è IT-—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤ (draft)
- –ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞ (pending_review)
- –°–≤–∞–¥–µ–±–Ω–æ–µ —Ç–æ—Ä–∂–µ—Å—Ç–≤–æ (confirmed)

### –ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ (3 –ø—Ä–æ–µ–∫—Ç–∞)
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –≤—ã—Å—Ç–∞–≤–∫–∞ "–¶–∏—Ñ—Ä–æ–≤–æ–µ –±—É–¥—É—â–µ–µ"
- –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ Samsung
- –ú—É–∑–µ–π–Ω–∞—è –∏–Ω—Å—Ç–∞–ª–ª—è—Ü–∏—è "–ò—Å—Ç–æ—Ä–∏—è –Ω–∞—É–∫–∏"

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

### 1. –°—Ç–∞—Ç—É—Å RLS
```sql
SELECT 
    tablename,
    rowsecurity as rls_enabled
FROM pg_tables 
WHERE tablename IN (
    'users', 'admin_users', 'estimates', 'equipment_catalog', 
    'homepage_equipment', 'news_blog', 'cases', 'services_blocks', 'logos'
)
ORDER BY tablename;
```

### 2. –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π
```sql
SELECT 
    'users' as table_name, 
    COUNT(*) as record_count 
FROM users
UNION ALL
SELECT 
    'admin_users' as table_name, 
    COUNT(*) as record_count 
FROM admin_users
UNION ALL
SELECT 
    'estimates' as table_name, 
    COUNT(*) as record_count 
FROM estimates;
```

### 3. –¢–µ—Å—Ç–æ–≤—ã–µ –∑–∞—è–≤–∫–∏
```sql
SELECT 
    e.title,
    u.name as client_name,
    e.status,
    e.total_amount
FROM estimates e
LEFT JOIN users u ON e.user_id = u.id
ORDER BY e.created_at;
```

## üö® –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- ‚ö†Ô∏è **RLS –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–∫–ª—é—á–µ–Ω** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –≤ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ä–µ–¥–µ
- ‚ö†Ô∏è **–í—Å–µ –ø–æ–ª–∏—Ç–∏–∫–∏ —É–¥–∞–ª–µ–Ω—ã** - –¥–æ—Å—Ç—É–ø –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω
- ‚ö†Ô∏è **–¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ** - –∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –ò–Ω–¥–µ–∫—Å—ã —Å–æ–∑–¥–∞–Ω—ã –¥–ª—è –≤—Å–µ—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –¢—Ä–∏–≥–≥–µ—Ä—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç timestamps
- ‚úÖ JSONB –ø–æ–ª—è –¥–ª—è –≥–∏–±–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö

### –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- ‚úÖ –û—Å–Ω–æ–≤–∞–Ω–æ –Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –∏–∑ AdminContext
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ —Å AdminDashboard –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –∏–∑ TypeScript

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤:

1. **–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å** –±–µ–∑ –æ—à–∏–±–æ–∫ RLS
2. **–í—Å–µ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã** —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
3. **–¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã** –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞** –∏–Ω–¥–µ–∫—Å–∞–º–∏
5. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤ Supabase
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –ø–æ –ø–æ—Ä—è–¥–∫—É
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å RLS –≤ —Ç–∞–±–ª–∏—Ü–µ pg_tables
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–æ–∑–¥–∞–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

**üöÄ –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ –ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏ —Å —É—Å–ø–µ—à–Ω—ã–º–∏ —Ä–µ—à–µ–Ω–∏—è–º–∏ –¥–ª—è –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è!**
