# üöÄ –ë—ã—Å—Ç—Ä–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≤—Ö–æ–¥–∞ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

## üìã –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

### 1Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ
```bash
npm run dev
```
–î–æ–ª–∂–Ω–æ –±—ã—Ç—å: `Local: http://localhost:8083/`

### 2Ô∏è‚É£ –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤—Ö–æ–¥–∞
```
http://localhost:8083/admin/login
```

### 3Ô∏è‚É£ –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–æ–π—Ç–∏ —Å –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–º–∏

**–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä:**
- üìß Email: `admin@weshow.ru`
- üîë –ü–∞—Ä–æ–ª—å: `password`

**–ú–µ–Ω–µ–¥–∂–µ—Ä:**
- üìß Email: `manager@weshow.ru`
- üîë –ü–∞—Ä–æ–ª—å: `password`

### 4Ô∏è‚É£ –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)

–î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –ª–æ–≥–∏ (—Ç–æ–ª—å–∫–æ –≤ development):
```
üîê Login attempt for: admin@weshow.ru
‚úÖ Login successful, data: {...}
üë§ User ID: ...
üì• Fetching user profile...
üë§ User profile loaded: {...}
‚úÖ Login complete, user and profile set!
```

## ‚ùå –ï—Å–ª–∏ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –æ—à–∏–±–∫–∞

### –û—à–∏–±–∫–∞: "–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ –Ω–∞–π–¥–µ–Ω"

**–†–µ—à–µ–Ω–∏–µ:**

1. –û—Ç–∫—Ä–æ–π—Ç–µ Supabase Dashboard
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ SQL Editor
3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –∏–∑ —Ñ–∞–π–ª–∞ `check_admin_users.sql`

```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
SELECT 
  au.id,
  au.email,
  up.full_name,
  up.role
FROM auth.users au
LEFT JOIN user_profiles up ON au.id = up.id
WHERE au.email IN ('admin@weshow.ru', 'manager@weshow.ru');
```

4. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–µ—Ç - —Å–æ–∑–¥–∞–π—Ç–µ –∏—Ö:

**–°–æ–∑–¥–∞—Ç—å —á–µ—Ä–µ–∑ Supabase Dashboard:**
- –ü–µ—Ä–µ–π–¥–∏—Ç–µ: Authentication ‚Üí Users ‚Üí Create user
- Email: `admin@weshow.ru`
- Password: `password`
- Confirm email: ‚úÖ (–ø–æ—Å—Ç–∞–≤—å—Ç–µ –≥–∞–ª–æ—á–∫—É)

**–ó–∞—Ç–µ–º –≤—ã–ø–æ–ª–Ω–∏—Ç–µ SQL:**
```sql
INSERT INTO user_profiles (id, full_name, company_name, role)
SELECT 
  id,
  '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä WeShow',
  'WeShow',
  'admin'::user_role
FROM auth.users
WHERE email = 'admin@weshow.ru';
```

### –û—à–∏–±–∫–∞: "–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞"

**–†–µ—à–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–∏—Ç—å —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```sql
UPDATE user_profiles
SET role = 'admin'::user_role
WHERE id IN (
  SELECT id FROM auth.users 
  WHERE email = 'admin@weshow.ru'
);
```

### –û—à–∏–±–∫–∞: "–ù–µ–≤–µ—Ä–Ω—ã–π email –∏–ª–∏ –ø–∞—Ä–æ–ª—å"

**–†–µ—à–µ–Ω–∏–µ:**

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –≤–≤–æ–¥–∞
2. –°–±—Ä–æ—Å—å—Ç–µ –ø–∞—Ä–æ–ª—å —á–µ—Ä–µ–∑ Supabase Dashboard:
   - Authentication ‚Üí Users ‚Üí –ù–∞–π–¥–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Üí Send magic link

### –û—à–∏–±–∫–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏: "Multiple GoTrueClient instances"

**–†–µ—à–µ–Ω–∏–µ:** –£–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ! –ü—Ä–æ—Å—Ç–æ –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É (Ctrl+F5)

### –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω—ã:**
1. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π email/–ø–∞—Ä–æ–ª—å
2. –ù–µ—Ç –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. –†–æ–ª—å –Ω–µ admin/manager

**–†–µ—à–µ–Ω–∏–µ:** –°–º–æ—Ç—Ä–∏—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ - —Ç–∞–º –±—É–¥–µ—Ç —Ç–æ—á–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞

## üîß –ë—ã—Å—Ç—Ä–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

```bash
# 1. –û—Ç–∫—Ä–æ–π—Ç–µ Supabase Dashboard: https://supabase.com/dashboard
# 2. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç: weshow-nextgen-platform
# 3. SQL Editor ‚Üí New query
# 4. –í—Å—Ç–∞–≤—å—Ç–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```

```sql
-- –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ø—Ä–æ—Ñ–∏–ª—å –æ–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º
DO $$
DECLARE
  user_id uuid;
BEGIN
  -- –í–ê–ñ–ù–û: –°–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ Dashboard!
  -- Authentication -> Users -> Create user
  -- –ó–∞—Ç–µ–º –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç
  
  SELECT id INTO user_id
  FROM auth.users
  WHERE email = 'admin@weshow.ru';
  
  IF user_id IS NOT NULL THEN
    INSERT INTO user_profiles (id, full_name, company_name, role)
    VALUES (
      user_id,
      '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä WeShow',
      'WeShow',
      'admin'::user_role
    )
    ON CONFLICT (id) DO UPDATE
    SET role = 'admin'::user_role,
        updated_at = NOW();
    
    RAISE NOTICE '–ü—Ä–æ—Ñ–∏–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —Å–æ–∑–¥–∞–Ω/–æ–±–Ω–æ–≤–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ!';
  ELSE
    RAISE NOTICE '–°–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ Dashboard!';
  END IF;
END $$;
```

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è

### –í –±—Ä–∞—É–∑–µ—Ä–µ:
1. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12)
2. Console ‚Üí –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –ª–æ–≥–∏ –≤—Ö–æ–¥–∞
3. Application ‚Üí Local Storage ‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `weshow-auth-token`
4. Network ‚Üí –°–ª–µ–¥–∏—Ç–µ –∑–∞ –∑–∞–ø—Ä–æ—Å–∞–º–∏ –∫ Supabase

### –í Supabase:
1. Table Editor ‚Üí user_profiles ‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–ø–∏—Å–∏
2. Authentication ‚Üí Users ‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
3. Logs ‚Üí –°–ª–µ–¥–∏—Ç–µ –∑–∞ –æ—à–∏–±–∫–∞–º–∏

## üéØ –í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –µ—Å–ª–∏:

‚úÖ –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `/admin/login`
‚úÖ –ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ `/admin/`
‚úÖ –í–∏–¥–Ω–∞ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å —Å –º–µ–Ω—é —Å–ª–µ–≤–∞
‚úÖ –í –∫–æ–Ω—Å–æ–ª–∏ –ª–æ–≥–∏ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—Ö–æ–¥–∞
‚úÖ –ù–µ—Ç –∫—Ä–∞—Å–Ω—ã—Ö –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏

## üìû –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–ª–æ

1. –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞ (Ctrl+Shift+Del)
2. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ —Ä–µ–∂–∏–º–µ –∏–Ω–∫ognito
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ dev-—Å–µ—Ä–≤–µ—Ä
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ `.env`
5. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Ñ–∞–π–ª `ADMIN_LOGIN_FIX_REPORT.md` –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π

---
*–°–æ–∑–¥–∞–Ω–æ: ${new Date().toLocaleString('ru-RU')}*
*–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: WeShow NextGen Platform*




