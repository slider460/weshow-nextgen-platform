# üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –°–¢–†–ê–ù–ò–¶–´ –û–ë–û–†–£–î–û–í–ê–ù–ò–Ø

## üîç –ü–†–û–ë–õ–ï–ú–ê:

**–°–∏–º–ø—Ç–æ–º—ã:**
- ‚ùå –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/equipment` –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
- ‚ùå –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
- ‚ùå –°–ø–∏—Å–æ–∫ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è –ø—É—Å—Ç–æ–π

**–ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞:** –¢–∞ –∂–µ –ø—Ä–æ–±–ª–µ–º–∞ - Supabase –∫–ª–∏–µ–Ω—Ç –∑–∞–≤–∏—Å–∞–µ—Ç –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–∞—Ö –∫ —Ç–∞–±–ª–∏—Ü–∞–º `equipment_catalog` –∏ `equipment_categories`

## üîß –†–ï–®–ï–ù–ò–ï:

### 1. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ –≤ `src/api/equipment.ts`:**

**–ò–∑–º–µ–Ω–∏–ª–∏ –ø–æ–¥—Ö–æ–¥ –∫ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö:**
- ‚ùå **–ë—ã–ª–æ:** `supabase.from('equipment_catalog').select('*')`
- ‚úÖ **–°—Ç–∞–ª–æ:** –ü—Ä—è–º–æ–π REST API –≤—ã–∑–æ–≤ —á–µ—Ä–µ–∑ `fetch()`

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏:**
- ‚úÖ **getEquipment()** - –∑–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ–≥–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
- ‚úÖ **getCategories()** - –∑–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π

**–ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ—Ç –∂–µ –ø–æ–¥—Ö–æ–¥ —Å REST API:**
```typescript
const url = `${supabaseUrl}/rest/v1/equipment_catalog?select=*&order=created_at.desc`;
const response = await fetch(url, {
  method: 'GET',
  headers: {
    'apikey': supabaseKey,
    'Authorization': `Bearer ${supabaseKey}`,
    'Content-Type': 'application/json',
  },
});
```

### 2. **–û—Ç–∫–ª—é—á–∏—Ç—å RLS –¥–ª—è —Ç–∞–±–ª–∏—Ü –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è:**

**–í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç –≤ Supabase Dashboard:**

```sql
-- –û—Ç–∫–ª—é—á–∞–µ–º RLS –¥–ª—è —Ç–∞–±–ª–∏—Ü –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
ALTER TABLE public.equipment_catalog DISABLE ROW LEVEL SECURITY;
ALTER TABLE public.equipment_categories DISABLE ROW LEVEL SECURITY;

-- –£–¥–∞–ª—è–µ–º –≤—Å–µ –ø–æ–ª–∏—Ç–∏–∫–∏ RLS
DROP POLICY IF EXISTS "equipment_catalog_select_policy" ON public.equipment_catalog;
DROP POLICY IF EXISTS "equipment_categories_select_policy" ON public.equipment_categories;
-- ... (–¥—Ä—É–≥–∏–µ –ø–æ–ª–∏—Ç–∏–∫–∏)
```

**–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–æ—Ç–æ–≤—ã–π —Ñ–∞–π–ª:** `–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï_RLS_EQUIPMENT_CATALOG.sql`

## üìä –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê:

### –¢–µ—Å—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è:
- **URL:** http://localhost:8085/test-equipment-page
- **–ù–∞–∂–º–∏—Ç–µ:** "üöÄ –¢–µ—Å—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è"
- **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** "‚úÖ –£—Å–ø–µ—Ö! –ó–∞–≥—Ä—É–∂–µ–Ω–æ X –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏ Y –µ–¥–∏–Ω–∏—Ü –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è"

### –ü—Ä–æ–≤–µ—Ä–∫–∞ RLS:
```sql
-- –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å RLS –¥–ª—è —Ç–∞–±–ª–∏—Ü –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
SELECT schemaname, tablename, rowsecurity 
FROM pg_tables 
WHERE tablename IN ('equipment_catalog', 'equipment_categories');
```

**–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:** `rowsecurity = false` –¥–ª—è –æ–±–µ–∏—Ö —Ç–∞–±–ª–∏—Ü

## üéØ –û–ñ–ò–î–ê–ï–ú–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢:

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
1. **–°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è:** http://localhost:8085/equipment - –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
2. **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏:** –û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ —Ñ–∏–ª—å—Ç—Ä–∞—Ö
3. **–°–ø–∏—Å–æ–∫ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è:** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –µ–¥–∏–Ω–∏—Ü—ã –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
4. **–ö–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞:** –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —É—Å–ø–µ—à–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É

### –í –∫–æ–Ω—Å–æ–ª–∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
üîÑ getCategories: –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —á–µ—Ä–µ–∑ REST API...
üîÑ getCategories: –û—Ç–≤–µ—Ç –ø–æ–ª—É—á–µ–Ω, —Å—Ç–∞—Ç—É—Å: 200
‚úÖ getCategories: –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã: [–º–∞—Å—Å–∏–≤ –¥–∞–Ω–Ω—ã—Ö]
üîÑ getEquipment: –ó–∞–≥—Ä—É–∂–∞–µ–º –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ REST API...
üîÑ getEquipment: –û—Ç–≤–µ—Ç –ø–æ–ª—É—á–µ–Ω, —Å—Ç–∞—Ç—É—Å: 200
‚úÖ getEquipment: –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ: [–º–∞—Å—Å–∏–≤ –¥–∞–Ω–Ω—ã—Ö]
```

## üöÄ –ü–û–°–õ–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:

1. **–°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å –¥–∞–Ω–Ω—ã–µ**
2. **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤ —Ñ–∏–ª—å—Ç—Ä–∞—Ö**
3. **–°–ø–∏—Å–æ–∫ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å**
4. **–ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –±—É–¥—É—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞—Ç—å**

## üìã –ß–ï–ö-–õ–ò–°–¢:

- [x] getEquipment –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç REST API)
- [x] getCategories –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç REST API)
- [ ] RLS –æ—Ç–∫–ª—é—á–µ–Ω –¥–ª—è equipment_catalog
- [ ] RLS –æ—Ç–∫–ª—é—á–µ–Ω –¥–ª—è equipment_categories
- [ ] –¢–µ—Å—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —É—Å–ø–µ—Ö
- [ ] –°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
- [ ] –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
- [ ] –°–ø–∏—Å–æ–∫ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç

## üîÑ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò:

1. **–í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç** –¥–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è RLS
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ—Å—Ç:** http://localhost:8085/test-equipment-page
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è:** http://localhost:8085/equipment
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:** —Ñ–∏–ª—å—Ç—Ä—ã, –ø–æ–∏—Å–∫, –∫–æ—Ä–∑–∏–Ω–∞

## üîó –°–í–Ø–ó–ê–ù–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:

- ‚úÖ **–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- ‚úÖ **–ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- ‚úÖ **–°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- üîÑ **RLS –ø–æ–ª–∏—Ç–∏–∫–∏** - –Ω—É–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å

---

*–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è: ${new Date().toLocaleString('ru-RU')}*  
*–ü—Ä–æ–±–ª–µ–º–∞: Supabase –∫–ª–∏–µ–Ω—Ç –∑–∞–≤–∏—Å–∞–µ—Ç*  
*–†–µ—à–µ–Ω–∏–µ: REST API + –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ RLS*
