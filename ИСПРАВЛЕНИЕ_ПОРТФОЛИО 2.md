# üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú–´ –° –ü–û–†–¢–§–û–õ–ò–û

## üîç –ü–†–û–ë–õ–ï–ú–ê:

**–°–∏–º–ø—Ç–æ–º—ã:**
- ‚ùå –ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- ‚ùå –†–∞–∑–¥–µ–ª –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ –ø—É—Å—Ç–æ–π
- ‚ùå –ü—Ä–æ–µ–∫—Ç—ã –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ –ë–î

**–ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞:** –¢–∞ –∂–µ –ø—Ä–æ–±–ª–µ–º–∞, —á—Ç–æ –∏ —Å –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ–º - Supabase –∫–ª–∏–µ–Ω—Ç –∑–∞–≤–∏—Å–∞–µ—Ç –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–∞—Ö –∫ —Ç–∞–±–ª–∏—Ü–µ `cases`

## üîß –†–ï–®–ï–ù–ò–ï:

### 1. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Ö—É–∫ useCases:**

**–ò–∑–º–µ–Ω–∏–ª–∏ –ø–æ–¥—Ö–æ–¥ –∫ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö:**
- ‚ùå **–ë—ã–ª–æ:** `supabase.from('cases').select('*')`
- ‚úÖ **–°—Ç–∞–ª–æ:** –ü—Ä—è–º–æ–π REST API –≤—ã–∑–æ–≤ —á–µ—Ä–µ–∑ `fetch()`

**–ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ—Ç –∂–µ –ø–æ–¥—Ö–æ–¥, —á—Ç–æ –∏ –¥–ª—è –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è:**
```typescript
const url = `${SUPABASE_URL}/rest/v1/cases?select=*&is_visible=eq.true&order=sort_order.asc`;
const response = await fetch(url, {
  method: 'GET',
  headers: {
    'apikey': SUPABASE_KEY,
    'Authorization': `Bearer ${SUPABASE_KEY}`,
    'Content-Type': 'application/json',
  },
});
```

### 2. **–û—Ç–∫–ª—é—á–∏—Ç—å RLS –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã cases:**

**–í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç –≤ Supabase Dashboard:**

```sql
-- –û—Ç–∫–ª—é—á–∞–µ–º RLS –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã cases
ALTER TABLE public.cases DISABLE ROW LEVEL SECURITY;

-- –£–¥–∞–ª—è–µ–º –≤—Å–µ –ø–æ–ª–∏—Ç–∏–∫–∏ RLS –¥–ª—è cases
DROP POLICY IF EXISTS "cases_select_policy" ON public.cases;
DROP POLICY IF EXISTS "cases_insert_policy" ON public.cases;
DROP POLICY IF EXISTS "cases_update_policy" ON public.cases;
DROP POLICY IF EXISTS "cases_delete_policy" ON public.cases;
```

**–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–æ—Ç–æ–≤—ã–π —Ñ–∞–π–ª:** `–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï_RLS_CASES.sql`

## üìä –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê:

### –¢–µ—Å—Ç –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ:
- **URL:** http://localhost:8085/test-portfolio-loading
- **–ù–∞–∂–º–∏—Ç–µ:** "üöÄ –¢–µ—Å—Ç –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ"
- **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** "‚úÖ –£—Å–ø–µ—Ö! –ó–∞–≥—Ä—É–∂–µ–Ω–æ X –∫–µ–π—Å–æ–≤ –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ"

### –ü—Ä–æ–≤–µ—Ä–∫–∞ RLS:
```sql
-- –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å RLS –¥–ª—è cases
SELECT schemaname, tablename, rowsecurity 
FROM pg_tables 
WHERE tablename = 'cases';
```

**–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:** `rowsecurity = false`

## üéØ –û–ñ–ò–î–ê–ï–ú–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢:

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
1. **–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞:** –ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Å–µ–∫—Ü–∏–∏ "–ù–∞—à–∏ –ø—Ä–æ–µ–∫—Ç—ã"
2. **–†–∞–∑–¥–µ–ª –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ:** http://localhost:8085/portfolio - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –ø—Ä–æ–µ–∫—Ç—ã
3. **–ö–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞:** –õ–æ–≥–∏ `useCases` –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —É—Å–ø–µ—à–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É

### –í –∫–æ–Ω—Å–æ–ª–∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
üîÑ useCases: –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–µ–π—Å—ã —á–µ—Ä–µ–∑ REST API...
üîÑ useCases: –î–µ–ª–∞–µ–º REST –∑–∞–ø—Ä–æ—Å...
üîÑ useCases: –û—Ç–≤–µ—Ç –ø–æ–ª—É—á–µ–Ω, —Å—Ç–∞—Ç—É—Å: 200
‚úÖ useCases: –ö–µ–π—Å—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã: [–º–∞—Å—Å–∏–≤ –¥–∞–Ω–Ω—ã—Ö]
‚úÖ useCases: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π: X
```

## üöÄ –ü–û–°–õ–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:

1. **–ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è** –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
2. **–†–∞–∑–¥–µ–ª –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ** –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
3. **–í—Å–µ –ø—Ä–æ–µ–∫—Ç—ã** –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –∏–∑ –ë–î
4. **–î–∏–∑–∞–π–Ω** –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–º

## üìã –ß–ï–ö-–õ–ò–°–¢:

- [x] useCases –∏—Å–ø—Ä–∞–≤–ª–µ–Ω (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç REST API)
- [ ] RLS –æ—Ç–∫–ª—é—á–µ–Ω –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã cases
- [ ] –¢–µ—Å—Ç –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —É—Å–ø–µ—Ö
- [ ] –ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- [ ] –†–∞–∑–¥–µ–ª –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

## üîÑ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò:

1. **–í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç** –¥–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è RLS
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ—Å—Ç –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ:** http://localhost:8085/test-portfolio-loading
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É:** http://localhost:8085
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–¥–µ–ª –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ:** http://localhost:8085/portfolio

---

*–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ: ${new Date().toLocaleString('ru-RU')}*  
*–ü—Ä–æ–±–ª–µ–º–∞: Supabase –∫–ª–∏–µ–Ω—Ç –∑–∞–≤–∏—Å–∞–µ—Ç*  
*–†–µ—à–µ–Ω–∏–µ: REST API + –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ RLS*
