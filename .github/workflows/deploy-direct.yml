name: üöÄ Direct Vercel Deployment

on:
  workflow_dispatch: # –¢–æ–ª—å–∫–æ —Ä—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    steps:
      - name: üì• Checkout code
        uses: actions/checkout@v4
        
      - name: üì¶ Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '18'
          cache: 'npm'
          
      - name: üìö Install dependencies
        run: npm ci
        
      - name: üî® Build project
        run: npm run build
        
      - name: üì¶ Install Vercel CLI
        run: npm install -g vercel
        
      - name: üîë Set Vercel environment
        run: |
          echo "üîë –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ Vercel:"
          echo "VERCEL_TOKEN: ${VERCEL_TOKEN:0:10}..." # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –Ω–∞—á–∞–ª–æ —Ç–æ–∫–µ–Ω–∞
          echo "VERCEL_ORG_ID: $VERCEL_ORG_ID"
          echo "VERCEL_PROJECT_ID: $VERCEL_PROJECT_ID"
          
      - name: üöÄ Deploy with Vercel CLI
        env:
          VERCEL_TOKEN: ${{ secrets.VERCEL_TOKEN }}
          VERCEL_ORG_ID: ${{ secrets.VERCEL_ORG_ID }}
          VERCEL_PROJECT_ID: ${{ secrets.VERCEL_PROJECT_ID }}
        run: |
          echo "üöÄ –ó–∞–ø—É—Å–∫–∞–µ–º –¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ Vercel CLI..."
          vercel --prod --yes --token $VERCEL_TOKEN
          
      - name: ‚úÖ Success notification
        if: success()
        run: |
          echo "üéâ –°–∞–π—Ç —É—Å–ø–µ—à–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç!"
          echo "üåê –ü—Ä–æ–≤–µ—Ä—å—Ç–µ: https://weshow-nextgen-platform.vercel.app"
          
      - name: ‚ùå Error details
        if: failure()
        run: |
          echo "‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–µ–ø–ª–æ–µ!"
          echo "üîç –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤—ã—à–µ –¥–ª—è –¥–µ—Ç–∞–ª–µ–π"
