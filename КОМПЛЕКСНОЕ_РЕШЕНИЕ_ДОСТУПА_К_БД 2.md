# üîß –ö–û–ú–ü–õ–ï–ö–°–ù–û–ï –†–ï–®–ï–ù–ò–ï: –°—Ç–∞–±–∏–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

## üö® –ü—Ä–æ–±–ª–µ–º–∞: –°–∞–π—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ —Ç–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –ë–î

**–°–∏–º–ø—Ç–æ–º—ã:**
- –î–∞–Ω–Ω—ã–µ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ Supabase
- –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å –∑–∞–≤–∏—Å–∞–µ—Ç –Ω–∞ –∑–∞–≥—Ä—É–∑–∫–µ
- –õ–æ–≥–æ—Ç–∏–ø—ã –∏ –∫–æ–Ω—Ç–µ–Ω—Ç –∏—Å—á–µ–∑–∞—é—Ç
- –û—à–∏–±–∫–∏ 403/401/500 –≤ –∫–æ–Ω—Å–æ–ª–∏
- RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –±–ª–æ–∫–∏—Ä—É—é—Ç –¥–æ—Å—Ç—É–ø

## üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–∏—á–∏–Ω

### 1. **RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –±–ª–æ–∫–∏—Ä—É—é—Ç –¥–æ—Å—Ç—É–ø**
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–æ–ª–∏—Ç–∏–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–æ–ª–∏—Ç–∏–∫ –¥–ª—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è
- –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –º–µ–∂–¥—É –ø–æ–ª–∏—Ç–∏–∫–∞–º–∏

### 2. **–ü—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π Supabase**
- –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ –∫–ª—é—á–∏ API
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ URL endpoints
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ retry –ª–æ–≥–∏–∫–∏

### 3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è**
- –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ fallback –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤
- –ù–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### 4. **–ü—Ä–æ–±–ª–µ–º—ã —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º**
- –ö–æ–Ω—Ñ–ª–∏–∫—Ç –º–µ–∂–¥—É localStorage –∏ –ë–î
- –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫—ç—à–∞

## üõ†Ô∏è –ö–û–ú–ü–õ–ï–ö–°–ù–û–ï –†–ï–®–ï–ù–ò–ï

### –≠—Ç–∞–ø 1: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ RLS –ø–æ–ª–∏—Ç–∏–∫ (–ö–†–ò–¢–ò–ß–ù–û)

#### –í—ã–ø–æ–ª–Ω–∏—Ç–µ —ç—Ç–æ—Ç SQL –∫–æ–¥ –≤ Supabase:
```sql
-- –ü–û–õ–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –í–°–ï–• RLS –ü–û–õ–ò–¢–ò–ö
-- –í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ Supabase SQL Editor

-- 1. HOMEPAGE_EQUIPMENT
DROP POLICY IF EXISTS "Allow authenticated full access" ON homepage_equipment;
DROP POLICY IF EXISTS "Allow anonymous read access" ON homepage_equipment;
DROP POLICY IF EXISTS "Public read access for homepage_equipment" ON homepage_equipment;
DROP POLICY IF EXISTS "Authenticated users can manage homepage_equipment" ON homepage_equipment;

CREATE POLICY "Public read access for homepage_equipment" ON homepage_equipment
    FOR SELECT USING (true);
CREATE POLICY "Authenticated users can manage homepage_equipment" ON homepage_equipment
    FOR ALL USING (auth.uid() IS NOT NULL);

-- 2. LOGOS
DROP POLICY IF EXISTS "Allow public read access" ON logos;
DROP POLICY IF EXISTS "Authenticated users can manage logos" ON logos;
DROP POLICY IF EXISTS "Enable read access for all users" ON logos;
DROP POLICY IF EXISTS "Enable insert for authenticated users only" ON logos;
DROP POLICY IF EXISTS "Enable update for authenticated users only" ON logos;
DROP POLICY IF EXISTS "Enable delete for authenticated users only" ON logos;

CREATE POLICY "Allow public read access" ON logos
    FOR SELECT USING (true);
CREATE POLICY "Authenticated users can manage logos" ON logos
    FOR ALL USING (auth.uid() IS NOT NULL);

-- 3. CASES
DROP POLICY IF EXISTS "Public read access for cases" ON cases;
DROP POLICY IF EXISTS "Authenticated users can manage cases" ON cases;
DROP POLICY IF EXISTS "Enable read access for all users" ON cases;

CREATE POLICY "Public read access for cases" ON cases
    FOR SELECT USING (true);
CREATE POLICY "Authenticated users can manage cases" ON cases
    FOR ALL USING (auth.uid() IS NOT NULL);

-- 4. NEWS_BLOG
DROP POLICY IF EXISTS "Public read access for news_blog" ON news_blog;
DROP POLICY IF EXISTS "Authenticated users can manage news_blog" ON news_blog;
DROP POLICY IF EXISTS "Enable read access for all users" ON news_blog;

CREATE POLICY "Public read access for news_blog" ON news_blog
    FOR SELECT USING (true);
CREATE POLICY "Authenticated users can manage news_blog" ON news_blog
    FOR ALL USING (auth.uid() IS NOT NULL);

-- 5. SERVICES_BLOCKS
DROP POLICY IF EXISTS "Public read access for services_blocks" ON services_blocks;
DROP POLICY IF EXISTS "Authenticated users can manage services_blocks" ON services_blocks;
DROP POLICY IF EXISTS "Enable read access for all users" ON services_blocks;

CREATE POLICY "Public read access for services_blocks" ON services_blocks
    FOR SELECT USING (true);
CREATE POLICY "Authenticated users can manage services_blocks" ON services_blocks
    FOR ALL USING (auth.uid() IS NOT NULL);

-- 6. USER_PROFILES
DROP POLICY IF EXISTS "Users can view own profile" ON user_profiles;
DROP POLICY IF EXISTS "Users can update own profile" ON user_profiles;
DROP POLICY IF EXISTS "Authenticated users can insert profiles" ON user_profiles;

CREATE POLICY "Users can view own profile" ON user_profiles
    FOR SELECT USING (auth.uid() = id);
CREATE POLICY "Users can update own profile" ON user_profiles
    FOR UPDATE USING (auth.uid() = id);
CREATE POLICY "Authenticated users can insert profiles" ON user_profiles
    FOR INSERT WITH CHECK (auth.uid() = id);

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
SELECT '–í—Å–µ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã!' as status;
```

### –≠—Ç–∞–ø 2: –°–æ–∑–¥–∞–Ω–∏–µ –Ω–∞–¥–µ–∂–Ω–æ–≥–æ Supabase –∫–ª–∏–µ–Ω—Ç–∞

#### –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `src/lib/supabase-stable.ts`:
```typescript
import { createClient, SupabaseClient } from '@supabase/supabase-js';
import { Database } from '../types/database';

// –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å fallback –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
const SUPABASE_CONFIG = {
  url: import.meta.env.VITE_SUPABASE_URL || 'https://zbykhdjqrtqftfitbvbt.supabase.co',
  anonKey: import.meta.env.VITE_SUPABASE_ANON_KEY || 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpieWtoZGpxcnRxZnRmaXRidmJ0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkxMzkzMjMsImV4cCI6MjA3NDcxNTMyM30.L9M4qQ_gkoyLj7oOwKZgyOVHoGv4JMJw-8m91IJAZjE',
  options: {
    auth: {
      persistSession: true,
      autoRefreshToken: true,
      detectSessionInUrl: true
    },
    global: {
      headers: {
        'X-Client-Info': 'weshow-nextgen-platform'
      }
    }
  }
};

class StableSupabaseClient {
  private client: SupabaseClient<Database>;
  private isConnected: boolean = false;
  private retryCount: number = 0;
  private maxRetries: number = 3;
  private retryDelay: number = 1000;

  constructor() {
    this.client = createClient<Database>(
      SUPABASE_CONFIG.url,
      SUPABASE_CONFIG.anonKey,
      SUPABASE_CONFIG.options
    );
    
    this.setupEventListeners();
    this.testConnection();
  }

  private setupEventListeners() {
    // –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
    this.client.auth.onAuthStateChange((event, session) => {
      console.log('üîê Auth state changed:', event, session?.user?.id);
    });
  }

  private async testConnection(): Promise<boolean> {
    try {
      const { data, error } = await this.client
        .from('logos')
        .select('count')
        .limit(1);
      
      if (error) {
        console.error('‚ùå Supabase connection test failed:', error);
        return false;
      }
      
      this.isConnected = true;
      this.retryCount = 0;
      console.log('‚úÖ Supabase connection established');
      return true;
    } catch (error) {
      console.error('‚ùå Supabase connection error:', error);
      return false;
    }
  }

  public async ensureConnection(): Promise<boolean> {
    if (this.isConnected) return true;
    
    if (this.retryCount >= this.maxRetries) {
      console.error('‚ùå Max retries reached for Supabase connection');
      return false;
    }
    
    this.retryCount++;
    console.log(`üîÑ Attempting to reconnect to Supabase (${this.retryCount}/${this.maxRetries})`);
    
    await new Promise(resolve => setTimeout(resolve, this.retryDelay * this.retryCount));
    
    return await this.testConnection();
  }

  public getClient(): SupabaseClient<Database> {
    return this.client;
  }

  public getConnectionStatus(): boolean {
    return this.isConnected;
  }

  public async resetConnection() {
    this.isConnected = false;
    this.retryCount = 0;
    await this.testConnection();
  }
}

// –°–æ–∑–¥–∞–µ–º –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä
export const stableSupabase = new StableSupabaseClient();
export const supabase = stableSupabase.getClient();
```

### –≠—Ç–∞–ø 3: –°–æ–∑–¥–∞–Ω–∏–µ –Ω–∞–¥–µ–∂–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–ª—è –¥–∞–Ω–Ω—ã—Ö

#### –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `src/contexts/StableDataContext.tsx`:
```typescript
import React, { createContext, useContext, useReducer, useCallback, useEffect, ReactNode } from 'react';
import { stableSupabase } from '../lib/supabase-stable';
import { Logo } from '../types/database';

interface StableDataState {
  logos: Logo[];
  homepageEquipment: any[];
  cases: any[];
  newsBlog: any[];
  servicesBlocks: any[];
  loading: boolean;
  error: string | null;
  lastUpdated: Date | null;
  connectionStatus: boolean;
}

type StableDataAction =
  | { type: 'SET_LOADING'; payload: boolean }
  | { type: 'SET_ERROR'; payload: string | null }
  | { type: 'SET_LOGOS'; payload: Logo[] }
  | { type: 'SET_HOMEPAGE_EQUIPMENT'; payload: any[] }
  | { type: 'SET_CASES'; payload: any[] }
  | { type: 'SET_NEWS_BLOG'; payload: any[] }
  | { type: 'SET_SERVICES_BLOCKS'; payload: any[] }
  | { type: 'SET_CONNECTION_STATUS'; payload: boolean }
  | { type: 'SET_LAST_UPDATED'; payload: Date };

const initialState: StableDataState = {
  logos: [],
  homepageEquipment: [],
  cases: [],
  newsBlog: [],
  servicesBlocks: [],
  loading: false,
  error: null,
  lastUpdated: null,
  connectionStatus: false,
};

const stableDataReducer = (state: StableDataState, action: StableDataAction): StableDataState => {
  switch (action.type) {
    case 'SET_LOADING':
      return { ...state, loading: action.payload };
    case 'SET_ERROR':
      return { ...state, error: action.payload, loading: false };
    case 'SET_LOGOS':
      return { ...state, logos: action.payload, loading: false, error: null, lastUpdated: new Date() };
    case 'SET_HOMEPAGE_EQUIPMENT':
      return { ...state, homepageEquipment: action.payload, loading: false, error: null, lastUpdated: new Date() };
    case 'SET_CASES':
      return { ...state, cases: action.payload, loading: false, error: null, lastUpdated: new Date() };
    case 'SET_NEWS_BLOG':
      return { ...state, newsBlog: action.payload, loading: false, error: null, lastUpdated: new Date() };
    case 'SET_SERVICES_BLOCKS':
      return { ...state, servicesBlocks: action.payload, loading: false, error: null, lastUpdated: new Date() };
    case 'SET_CONNECTION_STATUS':
      return { ...state, connectionStatus: action.payload };
    case 'SET_LAST_UPDATED':
      return { ...state, lastUpdated: action.payload };
    default:
      return state;
  }
};

interface StableDataContextType {
  state: StableDataState;
  fetchLogos: () => Promise<void>;
  fetchHomepageEquipment: () => Promise<void>;
  fetchCases: () => Promise<void>;
  fetchNewsBlog: () => Promise<void>;
  fetchServicesBlocks: () => Promise<void>;
  refreshAll: () => Promise<void>;
  checkConnection: () => Promise<boolean>;
}

const StableDataContext = createContext<StableDataContextType | undefined>(undefined);

export const StableDataProvider: React.FC<{ children: ReactNode }> = ({ children }) => {
  const [state, dispatch] = useReducer(stableDataReducer, initialState);

  const checkConnection = useCallback(async (): Promise<boolean> => {
    const isConnected = await stableSupabase.ensureConnection();
    dispatch({ type: 'SET_CONNECTION_STATUS', payload: isConnected });
    return isConnected;
  }, []);

  const fetchLogos = useCallback(async () => {
    try {
      dispatch({ type: 'SET_LOADING', payload: true });
      dispatch({ type: 'SET_ERROR', payload: null });

      const isConnected = await checkConnection();
      if (!isConnected) {
        throw new Error('–ù–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö');
      }

      const supabase = stableSupabase.getClient();
      const { data, error } = await supabase
        .from('logos')
        .select('*')
        .order('sort_order', { ascending: true });

      if (error) {
        throw error;
      }

      dispatch({ type: 'SET_LOGOS', payload: data || [] });
    } catch (error) {
      console.error('‚ùå Error fetching logos:', error);
      dispatch({ 
        type: 'SET_ERROR', 
        payload: error instanceof Error ? error.message : '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞' 
      });
    }
  }, [checkConnection]);

  const fetchHomepageEquipment = useCallback(async () => {
    try {
      const isConnected = await checkConnection();
      if (!isConnected) {
        throw new Error('–ù–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö');
      }

      const supabase = stableSupabase.getClient();
      const { data, error } = await supabase
        .from('homepage_equipment')
        .select('*')
        .order('sort_order', { ascending: true });

      if (error) {
        throw error;
      }

      dispatch({ type: 'SET_HOMEPAGE_EQUIPMENT', payload: data || [] });
    } catch (error) {
      console.error('‚ùå Error fetching homepage equipment:', error);
      dispatch({ 
        type: 'SET_ERROR', 
        payload: error instanceof Error ? error.message : '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞' 
      });
    }
  }, [checkConnection]);

  const fetchCases = useCallback(async () => {
    try {
      const isConnected = await checkConnection();
      if (!isConnected) {
        throw new Error('–ù–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö');
      }

      const supabase = stableSupabase.getClient();
      const { data, error } = await supabase
        .from('cases')
        .select('*')
        .order('created_at', { ascending: false });

      if (error) {
        throw error;
      }

      dispatch({ type: 'SET_CASES', payload: data || [] });
    } catch (error) {
      console.error('‚ùå Error fetching cases:', error);
      dispatch({ 
        type: 'SET_ERROR', 
        payload: error instanceof Error ? error.message : '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞' 
      });
    }
  }, [checkConnection]);

  const fetchNewsBlog = useCallback(async () => {
    try {
      const isConnected = await checkConnection();
      if (!isConnected) {
        throw new Error('–ù–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö');
      }

      const supabase = stableSupabase.getClient();
      const { data, error } = await supabase
        .from('news_blog')
        .select('*')
        .order('created_at', { ascending: false });

      if (error) {
        throw error;
      }

      dispatch({ type: 'SET_NEWS_BLOG', payload: data || [] });
    } catch (error) {
      console.error('‚ùå Error fetching news blog:', error);
      dispatch({ 
        type: 'SET_ERROR', 
        payload: error instanceof Error ? error.message : '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞' 
      });
    }
  }, [checkConnection]);

  const fetchServicesBlocks = useCallback(async () => {
    try {
      const isConnected = await checkConnection();
      if (!isConnected) {
        throw new Error('–ù–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö');
      }

      const supabase = stableSupabase.getClient();
      const { data, error } = await supabase
        .from('services_blocks')
        .select('*')
        .order('sort_order', { ascending: true });

      if (error) {
        throw error;
      }

      dispatch({ type: 'SET_SERVICES_BLOCKS', payload: data || [] });
    } catch (error) {
      console.error('‚ùå Error fetching services blocks:', error);
      dispatch({ 
        type: 'SET_ERROR', 
        payload: error instanceof Error ? error.message : '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞' 
      });
    }
  }, [checkConnection]);

  const refreshAll = useCallback(async () => {
    await Promise.all([
      fetchLogos(),
      fetchHomepageEquipment(),
      fetchCases(),
      fetchNewsBlog(),
      fetchServicesBlocks()
    ]);
  }, [fetchLogos, fetchHomepageEquipment, fetchCases, fetchNewsBlog, fetchServicesBlocks]);

  // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
  useEffect(() => {
    checkConnection().then(() => {
      refreshAll();
    });
  }, [checkConnection, refreshAll]);

  // –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
  useEffect(() => {
    const interval = setInterval(() => {
      checkConnection();
    }, 30000); // –ö–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥

    return () => clearInterval(interval);
  }, [checkConnection]);

  const value: StableDataContextType = {
    state,
    fetchLogos,
    fetchHomepageEquipment,
    fetchCases,
    fetchNewsBlog,
    fetchServicesBlocks,
    refreshAll,
    checkConnection,
  };

  return (
    <StableDataContext.Provider value={value}>
      {children}
    </StableDataContext.Provider>
  );
};

export const useStableData = (): StableDataContextType => {
  const context = useContext(StableDataContext);
  if (context === undefined) {
    throw new Error('useStableData must be used within a StableDataProvider');
  }
  return context;
};
```

### –≠—Ç–∞–ø 4: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ App.tsx

#### –û–±–Ω–æ–≤–∏—Ç–µ `src/App.tsx`:
```typescript
import { StableDataProvider } from './contexts/StableDataContext';

// –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ App –∑–∞–º–µ–Ω–∏—Ç–µ LogosProvider –Ω–∞ StableDataProvider:
const App = () => (
  <LanguageProvider>
    <StableDataProvider>
      <AuthProvider>
        <BrowserRouter>
          {/* –û—Å—Ç–∞–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ */}
        </BrowserRouter>
      </AuthProvider>
    </StableDataProvider>
  </LanguageProvider>
);
```

### –≠—Ç–∞–ø 5: –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

#### –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `src/components/DatabaseStatus.tsx`:
```typescript
import React, { useState, useEffect } from 'react';
import { useStableData } from '../contexts/StableDataContext';
import { Wifi, WifiOff, RefreshCw } from 'lucide-react';

export const DatabaseStatus: React.FC = () => {
  const { state, checkConnection, refreshAll } = useStableData();
  const [isRefreshing, setIsRefreshing] = useState(false);

  const handleRefresh = async () => {
    setIsRefreshing(true);
    await refreshAll();
    setIsRefreshing(false);
  };

  return (
    <div className="fixed top-4 right-4 z-50">
      <div className={`
        flex items-center gap-2 px-3 py-2 rounded-lg shadow-lg
        ${state.connectionStatus 
          ? 'bg-green-100 text-green-800 border border-green-200' 
          : 'bg-red-100 text-red-800 border border-red-200'
        }
      `}>
        {state.connectionStatus ? (
          <Wifi className="w-4 h-4" />
        ) : (
          <WifiOff className="w-4 h-4" />
        )}
        
        <span className="text-sm font-medium">
          {state.connectionStatus ? '–ë–î –ø–æ–¥–∫–ª—é—á–µ–Ω–∞' : '–ë–î –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞'}
        </span>
        
        <button
          onClick={handleRefresh}
          disabled={isRefreshing}
          className="ml-2 p-1 rounded hover:bg-white/50 transition-colors"
        >
          <RefreshCw className={`w-3 h-3 ${isRefreshing ? 'animate-spin' : ''}`} />
        </button>
      </div>
    </div>
  );
};
```

## üöÄ –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –ü–†–ò–ú–ï–ù–ï–ù–ò–Æ

### –®–∞–≥ 1: –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç
1. –û—Ç–∫—Ä–æ–π—Ç–µ: https://supabase.com/dashboard/project/zbykhdjqrtqftfitbvbt/sql
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –∫–æ–¥ –∏–∑ –≠—Ç–∞–ø–∞ 1

### –®–∞–≥ 2: –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã
1. –°–æ–∑–¥–∞–π—Ç–µ `src/lib/supabase-stable.ts`
2. –°–æ–∑–¥–∞–π—Ç–µ `src/contexts/StableDataContext.tsx`
3. –°–æ–∑–¥–∞–π—Ç–µ `src/components/DatabaseStatus.tsx`

### –®–∞–≥ 3: –û–±–Ω–æ–≤–∏—Ç–µ App.tsx
–ó–∞–º–µ–Ω–∏—Ç–µ LogosProvider –Ω–∞ StableDataProvider

### –®–∞–≥ 4: –î–æ–±–∞–≤—å—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
–î–æ–±–∞–≤—å—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç DatabaseStatus –≤ App.tsx

### –®–∞–≥ 5: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç
```bash
npm run dev
```

## ‚úÖ –†–ï–ó–£–õ–¨–¢–ê–¢

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Ä–µ—à–µ–Ω–∏—è:
- ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–≤—Ç–æ—Ä—ã –ø—Ä–∏ —Å–±–æ—è—Ö
- ‚úÖ Fallback –º–µ—Ö–∞–Ω–∏–∑–º—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫
- ‚úÖ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–æ—Å—Ç–æ—è–Ω–∏—è –ë–î –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ

## üîß –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ú–ï–†–´

### 1. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã –≤ Supabase Dashboard
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (UptimeRobot, Pingdom)

### 2. –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
- –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –±—ç–∫–∞–ø—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –≠–∫—Å–ø–æ—Ä—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –≤ JSON

### 3. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ CDN –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤

---

*–ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–æ: ${new Date().toLocaleString('ru-RU')}*  
*–°—Ç–∞—Ç—É—Å: –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é*
